{"version":3,"file":"scheduler.js","sources":["src/scheduler.js"],"sourcesContent":["/* global moment */\n/**\n *\n * This file replaces the original scheduler object used by Timekit.io\n * A compilation step substitutes the original reference to a reference\n * to this object.\n *\n */\n\nfunction request(method, url, data) {\n  const config = { method };\n\n  if (method.toUpperCase() === 'POST') {\n    config.body = JSON.stringify(data);\n  }\n\n  return fetch(url, config)\n    .then((res) => res.json())\n    .then((json) => json);\n}\n\nfunction toRemoteResponse(data) {\n  return typeof data === 'string'\n    ? new Response(data)\n    : new Response(JSON.stringify(data));\n}\n\n\n\nconst urlPath = path => `${window.APIGLOBAL}${path}`;\n\nconst scheduler = {\n  configure() {},\n\n  setUser() {},\n\n  findTime(data) {\n    console.log(data);\n    return request('GET', urlPath('/findtime'));\n  },\n\n  getUserTimezone() {\n    return Promise.resolve({\n      data: {\n        timezone: 'Europe/Stockholm',\n        utc_offset: 1,\n      },\n    });\n  },\n\n  include() {\n    return this;\n  },\n\n  headers() {\n    return this;\n  },\n\n  createBooking(data) {\n    console.log('Creating booking with:');\n    console.dir(data);\n    return request('POST', urlPath('/bookings'), data);\n  },\n};\n\nmodule.exports = scheduler;\n"],"names":["request","method","url","data","config","toUpperCase","body","JSON","stringify","fetch","then","res","json","urlPath","window","APIGLOBAL","path","scheduler","log","Promise","resolve","dir"],"mappings":";;;;;;AAAA;;;;;;;;;AASA,SAASA,OAAT,CAAiBC,MAAjB,EAAyBC,GAAzB,EAA8BC,IAA9B,EAAoC;MAC5BC,SAAS,EAAEH,cAAF,EAAf;;MAEIA,OAAOI,WAAP,OAAyB,MAA7B,EAAqC;WAC5BC,IAAP,GAAcC,KAAKC,SAAL,CAAeL,IAAf,CAAd;;;SAGKM,MAAMP,GAAN,EAAWE,MAAX,EACJM,IADI,CACC,UAACC,GAAD;WAASA,IAAIC,IAAJ,EAAT;GADD,EAEJF,IAFI,CAEC,UAACE,IAAD;WAAUA,IAAV;GAFD,CAAP;;;AAKF,AAQA,IAAMC,UAAU,SAAVA,OAAU;cAAWC,OAAOC,SAAlB,GAA8BC,IAA9B;CAAhB;;AAEA,IAAMC,YAAY;WAAA,uBACJ,EADI;SAAA,qBAGN,EAHM;UAAA,oBAKPd,IALO,EAKD;YACLe,GAAR,CAAYf,IAAZ;WACOH,QAAQ,KAAR,EAAea,QAAQ,WAAR,CAAf,CAAP;GAPc;iBAAA,6BAUE;WACTM,QAAQC,OAAR,CAAgB;YACf;kBACM,kBADN;oBAEQ;;KAHT,CAAP;GAXc;SAAA,qBAmBN;WACD,IAAP;GApBc;SAAA,qBAuBN;WACD,IAAP;GAxBc;eAAA,yBA2BFjB,IA3BE,EA2BI;YACVe,GAAR,CAAY,wBAAZ;YACQG,GAAR,CAAYlB,IAAZ;WACOH,QAAQ,MAAR,EAAgBa,QAAQ,WAAR,CAAhB,EAAsCV,IAAtC,CAAP;;CA9BJ;;AAkCA,kBAAiBc,SAAjB;;;;"}