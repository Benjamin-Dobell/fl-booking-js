{"version":3,"file":"scheduler.js","sources":["src/scheduler.js"],"sourcesContent":["/* global moment */\n/**\n *\n * This file replaces the original scheduler object used by Timekit.io\n * A compilation step substitutes the original reference to a reference\n * to this object.\n *\n */\nfunction request(method, url, data) {\n  const config = { method };\n\n  if (method.toUpperCase() === 'POST') {\n    config.body = JSON.stringify(data);\n  }\n\n  return fetch(url, config)\n    .then((res) => res.json())\n    .then((json) => json);\n}\n\nlet findTime = () => {};\nlet createBooking = () => {};\nlet userTimezone = {\n  timezone: moment.tz.guess(),\n  utc_offset: moment().utcOffset(),\n};\n\nconst scheduler = {\n  configure() { return this; },\n  setUser() { return this; },\n  include() { return this; },\n  headers() { return this; },\n  getUserTimezone: () => Promise.resolve({ data: userTimezone }),\n  findTime: data => Promise.resolve(findTime(data)), // to be overridden by controller\n  createBooking: data => createBooking(data), // to be overridden by controller\n  setFindTime(f) { findTime = f; },\n  setCreateBooking(f) { createBooking = f; },\n  setUserTimezone(tz) { userTimezone = tz; },\n};\n\nmodule.exports = scheduler;\n"],"names":["findTime","createBooking","userTimezone","moment","tz","guess","utcOffset","scheduler","Promise","resolve","data","f"],"mappings":";;;;;;AAAA;;;;;;;;AAQA,AAYA,IAAIA,YAAW,oBAAM,EAArB;AACA,IAAIC,iBAAgB,yBAAM,EAA1B;AACA,IAAIC,eAAe;YACPC,OAAOC,EAAP,CAAUC,KAAV,EADO;cAELF,SAASG,SAAT;CAFd;;AAKA,IAAMC,YAAY;WAAA,uBACJ;WAAS,IAAP;GADE;SAAA,qBAEN;WAAS,IAAP;GAFI;SAAA,qBAGN;WAAS,IAAP;GAHI;SAAA,qBAIN;WAAS,IAAP;GAJI;;mBAKC;WAAMC,QAAQC,OAAR,CAAgB,EAAEC,MAAMR,YAAR,EAAhB,CAAN;GALD;YAMN;WAAQM,QAAQC,OAAR,CAAgBT,UAASU,IAAT,CAAhB,CAAR;GANM;iBAOD;WAAQT,eAAcS,IAAd,CAAR;GAPC;aAAA,uBAQJC,CARI,EAQD;gBAAaA,CAAX;GARD;kBAAA,4BASCA,CATD,EASI;qBAAkBA,CAAhB;GATN;iBAAA,2BAUAP,EAVA,EAUI;mBAAiBA,EAAf;;CAVxB;;AAaA,kBAAiBG,SAAjB;;;;"}